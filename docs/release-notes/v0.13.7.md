# Release v0.13.7

## CLI Amend Mode - AI-powered commit message regeneration for `--amend`

### Added

**`gcop-rs commit --amend`**

- New `--amend` flag on the `commit` command regenerates the most recent commit's message using AI
- Reads the HEAD commit's diff via `get_commit_diff("HEAD")`; if additional staged changes exist, merges both diffs before sending to the LLM
- Executes `git commit --amend -m <message>` on accept
- Works with all existing modes: `--dry-run`, `--json`, `-y`, interactive menu (Accept / Edit / Retry / Quit)

**`commit_amend()` Trait Method**

- New `commit_amend(&self, message: &str)` method on `GitOperations` trait
- Uses git CLI (not git2) to preserve GPG signing and hook support

### Changed

**Diff Acquisition Refactor**

- Extracted `get_diff(repo, amend)` helper to unify amend/normal diff logic across interactive and JSON code paths, eliminating duplication

**Validation**

- `--amend --split` is rejected with a clear error message
- `--amend` on empty repositories (no commits) returns early with guidance

### Upgrade

```bash
# Homebrew
brew upgrade gcop-rs

# Cargo
cargo install gcop-rs

# pip
pip install --upgrade gcop-rs
```
